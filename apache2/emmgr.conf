<VirtualHost *:5100>
    ServerName emmgr.example.com
    ServerAdmin anders@abundo.se

    # serve static files without going through python/Flask
    alias /static /opt/emmgr/app/static
    <Directory /opt/emmgr/app/static>
        Require all granted
    </Directory>
	
    # Alias for serving files over http
    Alias "/tftpboot" "/tftpboot"
    <Directory /tftpboot>
        Options Indexes FollowSymlinks MultiViews
        AllowOverride All
        Order allow,deny
        Allow from all
        Require all granted
    </Directory>
	
    WSGIDaemonProcess emmgr user=www-data group=www-data processes=5 threads=1 maximum-requests=10
    WSGIScriptAlias / /opt/emmgr/app/emmgr.wsgi

    <Directory /opt/emmgr/app>
        WSGIProcessGroup emmgr
        WSGIApplicationGroup %{GLOBAL}
        Require all granted
    </Directory>
    
    ErrorLog ${APACHE_LOG_DIR}/emmgr-error.log
    CustomLog ${APACHE_LOG_DIR}/emmgr-access.log combined
    
</VirtualHost>
